gpfd:
  # This is the url which the Active directory dev app registration will redirect to after SSO is complete
  # baseUrl is a Spring Security template that resolves based on the current URL
  redirect-uri-template: "{baseUrl}/login/oauth2/code/gpfd-azure-dev"
  # Note,"gpfd-azure-dev" is also known as the Oauth2 'registrationId'

  # DEV MOJFIN database config
  datasource:
    read-only:
          url: ${MOJFIN_DB_URL}
          username: ${MOJFIN_DEV_READ_USERNAME}
          password: ${MOJFIN_DEV_READ_PASSWORD}
          driver-class-name: oracle.jdbc.pool.OracleDataSource
    write:
      url: ${MOJFIN_DB_URL}
      username: ${MOJFIN_DEV_WRITE_USERNAME}
      password: ${MOJFIN_DEV_WRITE_PASSWORD}
      driver-class-name: oracle.jdbc.pool.OracleDataSource

  s3:
    has-s3-access: true
    permissions:
      rep000: ${PERMISSION_REP000_GROUP_ID}
      submission-reconciliation: ${PERMISSION_SUBMISSION_RECONCILIATION_GROUP_ID}

entra:
  tenant-id: ${AZURE_TENANT_ID}

spring:
  security:
    oauth2:
      client:
        registration:
          gpfd-azure-dev:
            client-id: ${AZURE_CLIENT_ID}
            client-secret: ${AZURE_CLIENT_SECRET}
            scope: openid, profile, email
            redirect-uri:  ${gpfd.redirect-uri-template}
            authorization-grant-type: authorization_code
            client-authentication-method: client_secret_basic

        provider:
          gpfd-azure-dev:
            issuer-uri: https://login.microsoftonline.com/${AZURE_TENANT_ID}/v2.0
            token-uri: https://login.microsoftonline.com/${AZURE_TENANT_ID}/oauth2/v2.0/token
            user-info-uri: https://graph.microsoft.com/oidc/userinfo
            jwk-set-uri: https://login.microsoftonline.com/${AZURE_TENANT_ID}/discovery/v2.0/keys

server:
  port: 8080
  forward-headers-strategy: native # not sure if needed
  shutdown: graceful
  servlet:
    session:
      cookie:
        secure: true

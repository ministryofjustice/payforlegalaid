name: One to deploy them all

on:
  push:
    branches: foo-bar

jobs:
  To_Dev:
    name: Deploy to dev
    uses: ./.github/workflows/deploy_api_to_env.yml
    with:
      github_environment: development
      environment_name: dev
      gpfd_url: laa-get-payments-finance-data-api-dev.apps.live.cloud-platform.service.justice.gov.uk
      alert_severity: laa-get-legal-aid-data-dev
      secret_name: gpfd-test-secret-01
    secrets:
      api_socket_key: ${{ secrets.DEV_API_SOCKET_KEY }}
      snyk_token: ${{ secrets.SNYK_TOKEN }}
      socket_key: ${{ secrets.DEV_SOCKET_KEY }}
      ecr_role_to_assume: ${{ secrets.DEV_ECR_ROLE_TO_ASSUME }}
      kube_namespace: ${{ secrets.KUBE_NAMESPACE_DEV }}
      kube_cluster: ${{ secrets.KUBE_CLUSTER_DEV }}
      kube_token: ${{ secrets.KUBE_TOKEN_DEV }}
      kube_cert: ${{ secrets.KUBE_CERT_DEV }}
